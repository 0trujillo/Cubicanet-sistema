-- Tabla de AFPs
CREATE TABLE afps (
    id     SERIAL PRIMARY KEY,
    nombre VARCHAR(50) UNIQUE NOT NULL
);

-- Tabla de Sistemas de Salud
CREATE TABLE sistemas_salud (
    id     SERIAL PRIMARY KEY,
    nombre VARCHAR(50) UNIQUE NOT NULL
);

-- Tabla de Estados Civiles
CREATE TABLE estados_civiles (
    id     SERIAL PRIMARY KEY,
    nombre VARCHAR(20) UNIQUE NOT NULL
);

-- Tabla de Empleados
CREATE TABLE empleados (
    id                  SERIAL PRIMARY KEY,
    nombre              VARCHAR(120) NOT NULL,
    rut                 VARCHAR(12) UNIQUE NOT NULL,
    correo_trabajador   TEXT UNIQUE,
    fecha_nacimiento    DATE NOT NULL,
    cuenta_rut          BOOLEAN DEFAULT FALSE,
    estado_civil_id     INT REFERENCES estados_civiles(id)
);

-- Ta
CREATE TABLE proyectos (
    id               SERIAL PRIMARY KEY,
    nombre           VARCHAR(150) UNIQUE NOT NULL,
    fecha_inicio     DATE,
    fecha_termino    DATE
);


CREATE TABLE contratos (
    id                  SERIAL PRIMARY KEY,
    empleado_id         INT UNIQUE NOT NULL REFERENCES empleados(id),
    proyecto_id         INT NOT NULL REFERENCES proyectos(id),
    fecha_ingreso       DATE NOT NULL,
    afp_id              INT REFERENCES afps(id),
    sistema_salud_id    INT REFERENCES sistemas_salud(id),
    telefono_emp        VARCHAR(15),
    correo_empl         TEXT,
    sueldo_diario       NUMERIC(10,2),
    anticipo            NUMERIC(10,2) DEFAULT 0,
    created_at          TIMESTAMP WITH TIME ZONE DEFAULT now(),
    updated_at          TIMESTAMP WITH TIME ZONE DEFAULT now()
);

--Un empleado puede estar solo en un contrato.

--Un contrato siempre est√° vinculado a:
    --un empleado
    --un proyecto
    --un AFP y sistema de salud

